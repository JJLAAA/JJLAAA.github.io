<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Long March">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Long March">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Lee">
<meta property="article:tag" content="你要在长夜里举起火炬，树起一面旗帜，把那些痛苦的人、疲惫而迷惘的人、那些受苦受难的众生，都聚拢到旗帜下面来，跟随你的火炬前行。你要带着他们跳出野兽的包围，躲过强敌的屠刀，趟过湍急的河水，穿过险恶的裂谷，翻过冰封的山岭，走过泥泞的草地。你们会不断牺牲，不断有人倒下，历史未必会记住你们的名字，但你终究会带领他们走出悲惨的命运，走上一条光明的道路。你们所到之处，鲜花会盛开，星空会闪耀，那些受苦受难的人们，会看到希望">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Long March</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Long March</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/14/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/14/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%88%86%E6%9E%90/" class="post-title-link" itemprop="url">线程池分析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-14 21:25:11 / 修改时间：21:26:36" itemprop="dateCreated datePublished" datetime="2021-07-14T21:25:11+08:00">2021-07-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Java线程池技术"><a href="#Java线程池技术" class="headerlink" title="Java线程池技术"></a>Java线程池技术</h1><h2 id="线程池概述"><a href="#线程池概述" class="headerlink" title="线程池概述"></a>线程池概述</h2><ul>
<li>池化技术应该是最常用的提高程序性能的手段，包括线程池与数据库连接池，常量池等等</li>
<li><strong>创建与销毁线程是比较耗费时间的，不利于处理Java程序的高并发，因此引入线程池，也就是维护一组可用的线程，如果有任务，就立即将线程池的空闲线程分配给任务，提升性能，如果线程池内所有的线程都是忙状态的话，可以将任务放到任务队列，或者创建一个新的线程并放入线程池，用于处理新的任务</strong></li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/14/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%88%86%E6%9E%90/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/12/Atomic%E5%8E%9F%E5%AD%90%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/12/Atomic%E5%8E%9F%E5%AD%90%E7%B1%BB/" class="post-title-link" itemprop="url">Atomic原子类</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-12 22:53:55 / 修改时间：22:55:08" itemprop="dateCreated datePublished" datetime="2021-07-12T22:53:55+08:00">2021-07-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Atomic原子类的学习"><a href="#Atomic原子类的学习" class="headerlink" title="Atomic原子类的学习"></a>Atomic原子类的学习</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><ul>
<li><p>原子类说简单点就是具有原子/原子操作特征的类</p>
<ul>
<li>所谓原子操作就是指多线程环境下，一旦开始操作就不会被其他线程干扰的操作</li>
<li><span style='color:red;background:背景颜色;font-size:文字大小;'><strong>使用原子类的优势在于在对对应的数据进行更新的时候不需要加锁，避免使用synchronized的相对较高的开销，也可以实现线程安全（在没有Atomic原子类时，直接使用synchronized包裹来实现数据更新时的原子性，但是开销比较大，而<code>Atomic</code>的出现就是直接在类的基础上进行改造实现更改的原子性</strong>）</span></li>
</ul>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/12/Atomic%E5%8E%9F%E5%AD%90%E7%B1%BB/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/12/AQS%E5%8E%9F%E7%90%86%E4%B8%8ELock/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/12/AQS%E5%8E%9F%E7%90%86%E4%B8%8ELock/" class="post-title-link" itemprop="url">AQS原理与Lock</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-12 20:57:49 / 修改时间：23:08:48" itemprop="dateCreated datePublished" datetime="2021-07-12T20:57:49+08:00">2021-07-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="AQS学习"><a href="#AQS学习" class="headerlink" title="AQS学习"></a>AQS学习</h1><h2 id="AQS介绍"><a href="#AQS介绍" class="headerlink" title="AQS介绍"></a>AQS介绍</h2><ul>
<li><p>AQS的全称是 <code>AbstractQueuedSychronizer</code> 即<strong>抽象队列同步器</strong>，位于<code>juc.locks</code>包下</p>
<ul>
<li><span style='color:blue;background:背景颜色;font-size:文字大小;'><strong>整个<code>juc.locks.lock</code>接口的实现类基本上除了文章末尾补充的<code>StampedLock</code>之外，其余都是借助AQS实现同步功能</strong></span></li>
</ul>
</li>
<li><p>AQS 是一个用来<strong>构建锁和同步器的框架</strong>，比如常见的<span style='color:red;background:背景颜色;font-size:文字大小;'> ReentrantLock，Semaphore（信号量），其他的诸如ReentrantReadWriteLock，CountDownLatch，FutureTask(jdk1.7) </span>等等皆是基于 AQS 的。当然，我们自己也能利用 AQS 非常轻松容易地构造出符合我们自己需求的同步器，只要子类实现它的几个protected方法就可以了</p>
<ul>
<li><span style='color:red;background:背景颜色;font-size:文字大小;'><strong>所谓同步器就是为了<code>实现线程同步而设计的组件</code>，锁，信号量都可以视为同步器；线程同步的概念就是：线程之间按照一定的顺序执行</strong></span></li>
<li>并发编程的两大问题<ul>
<li>线程通信（数据交互）</li>
<li>线程同步（线程的执行顺序）</li>
</ul>
</li>
<li><span style='color:red;background:背景颜色;font-size:文字大小;'><strong>FutureTask在jdk1.7时依赖AQS构建，在JDK1.8后改为使用CAS+state变量的维护+WaitNode类型的链表来维护等待的线程—-可以说继承了AQS的思想</strong></span></li>
</ul>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/12/AQS%E5%8E%9F%E7%90%86%E4%B8%8ELock/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/12/Redis%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/12/Redis%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Redis总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-12 13:57:49 / 修改时间：13:59:22" itemprop="dateCreated datePublished" datetime="2021-07-12T13:57:49+08:00">2021-07-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Redis总结"><a href="#Redis总结" class="headerlink" title="Redis总结"></a>Redis总结</h1><h2 id="从本地缓存开始"><a href="#从本地缓存开始" class="headerlink" title="从本地缓存开始"></a>从本地缓存开始</h2><h3 id="本地缓存解决方案"><a href="#本地缓存解决方案" class="headerlink" title="本地缓存解决方案"></a>本地缓存解决方案</h3><p>先来聊聊本地缓存，这个实际在很多项目中用的蛮多，特别是单体架构的时候。数据量不大，并且没有分布式要求的话，使用本地缓存还是可以的。常见的单体架构中，我们使用 <strong>Nginx</strong> 来做<strong>负载均衡</strong>，部署两个相同的服务到服务器，两个服务使用同一个数据库，并且使用的是本地缓存。</p>
<ul>
<li><p>JDK自带的<code>HashMap</code> 和<code>ConcurrentHashMap</code></p>
<ul>
<li><code>ConcurrentHashMap</code>可以看作是线程安全版本的<code>HashMap</code> ，两者都是存放 key/value 形式的键值对。但是，大部分场景来说不会使用这两者当做缓存，因为只提供了缓存的功能，并没有提供其他诸如过期时间之类的功能。一个稍微完善一点的缓存框架至少要提供：<strong>过期时间、淘汰机制、命中率统计</strong>这三点。</li>
</ul>
</li>
<li><p><code>Ehcache</code>、 <code>Guava Cache </code>、 <code>Spring Cache</code></p>
<ul>
<li>Ehcache 的话相比于其他两者更加重量。不过，相比于 Guava Cache 、 Spring Cache 来说， Ehcache 支持可以嵌入到 hibernate 和 mybatis 作为多级缓存，并且可以将缓存的数据持久化到本地磁盘中、同时也提供了集群方案（比较鸡肋，可忽略）</li>
<li>Guava Cache 和 Spring Cache 两者的话比较像。<ul>
<li>Guava 相比于 Spring Cache 的话使用的更多一点，它提供了 API 非常方便我们使用，同时也提供了设置缓存有效时间等功能。它的内部实现也比较干净，很多地方都和 ConcurrentHashMap 的思想有异曲同工之妙。</li>
</ul>
</li>
<li>使用 Spring Cache 的注解实现缓存的话，代码会看着很干净和优雅，但是很容易出现问题比如缓存穿透、内存溢出。</li>
</ul>
</li>
<li><p><code>Caffeine</code></p>
<ul>
<li>相比于 Guava 来说 Caffeine 在各个方面比如性能要更加优秀，一般建议使用其来替代 Guava 。并且， Guava 和 Caffeine 的使用方式很像！</li>
</ul>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/12/Redis%E6%80%BB%E7%BB%93/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/12/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%AE%B9%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/12/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%AE%B9%E5%99%A8/" class="post-title-link" itemprop="url">线程安全的容器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-12 10:28:52 / 修改时间：10:31:32" itemprop="dateCreated datePublished" datetime="2021-07-12T10:28:52+08:00">2021-07-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>如果你要使用线程安全的集合的话， <code>java.util.concurrent</code> 包中提供了很多并发容器供你使用：</p>
<ol>
<li>线程安全的Map：<code>ConcurrentHashMap</code>: 可以看作是线程安全的 <code>HashMap</code></li>
<li><strong>线程安全的List</strong>：<code>CopyOnWriteArrayList</code>:可以看作是线程安全的 <code>List</code>，在读多写少的场合性能非常好(<strong>使用了可重入锁，读时不加锁，写时加锁，内部存储结构是被volatile修饰的数组</strong>)，远远好于 <code>Vector</code>.</li>
<li><strong>线程安全的队列</strong><ol>
<li><strong>非阻塞队列</strong>：<code>ConcurrentLinkedQueue</code>:高效的并发队列，<strong>使用链表实现</strong>。可以看做一个线程安全的 <code>LinkedList</code>，这是一个<strong>非阻塞队列</strong>。</li>
<li><strong>阻塞队列</strong>：<code>BlockingQueue</code>: 这是一个接口，直接继承自<code>Queue</code>这个接口，JDK 内部通过链表、数组等方式实现了这个接口。<strong>表示阻塞队列，非常适合用于作为数据共享的通道</strong>。<ol>
<li><span style='color:red;background:背景颜色;font-size:文字大小;'><strong>关于阻塞队列与非阻塞队列的区别</strong></span><ol>
<li><span style='color:red;background:背景颜色;font-size:文字大小;'><strong>大致的理解就是，当队列满了或为空时，进行添加或删除操作时，阻塞队列会阻塞操作或者报异常，并使用线程锁来实现线程安全，适用于<code>生产者与消费者</code>的模型,非阻塞队列则不会阻塞，直接返回操作结果，并且使用CAS保证线程安全，性能比较好</strong></span></li>
<li>参考<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/94e3bc3e05ff">此篇文章</a></li>
</ol>
</li>
<li><code>ArrayBlockingQueue</code></li>
<li><code>LinkedBlockingQueue</code></li>
<li><code>PriorityBlockingQueue</code></li>
<li><code>SynchronousQueue</code></li>
<li><code>DelayedWorkQueue</code></li>
</ol>
</li>
</ol>
</li>
<li>线程安全的跳表：<code>ConcurrentSkipListMap</code> :<strong>跳表的实现</strong>。这是一个<code>Map</code>，使用跳表的数据结构进行快速查找。<ol>
<li>维护元素的顺序</li>
</ol>
</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/12/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%AE%B9%E5%99%A8/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">设计模式学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-12 09:05:09" itemprop="dateCreated datePublished" datetime="2021-07-12T09:05:09+08:00">2021-07-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-14 09:15:49" itemprop="dateModified" datetime="2021-07-14T09:15:49+08:00">2021-07-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="设计模式概述"><a href="#设计模式概述" class="headerlink" title="设计模式概述"></a>设计模式概述</h2><ol>
<li><p>所谓设计模式就是<strong>面向对象编程中</strong>遇到的各种现成的套路，使用合适的设计模式可以提高程序的<strong>可读性</strong>与<strong>可重用性</strong>和<strong>可扩展性</strong></p>
</li>
<li><p>设计模式一书中提到有23种设计模式，分为以下三类</p>
<img src="http://images.demoli.xyz/image-20210516204549657.png" alt="image-20210516204549657" />
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/11/docker-%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/11/docker-%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/" class="post-title-link" itemprop="url">docker 私有仓库部署</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-11 16:36:49 / 修改时间：16:40:58" itemprop="dateCreated datePublished" datetime="2021-07-11T16:36:49+08:00">2021-07-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Docker私有仓库部署"><a href="#Docker私有仓库部署" class="headerlink" title="Docker私有仓库部署"></a>Docker私有仓库部署</h1><h2 id="0-需求"><a href="#0-需求" class="headerlink" title="0 需求"></a>0 需求</h2><ul>
<li><p>构建Docker私有仓库可避免开发生产时可能产生的网络问题；</p>
</li>
<li><p>使用Docker Registry私有仓库部署，使用Docker Auth做身份验证</p>
</li>
<li><p>考虑到使用场景：发布镜像一般需要认证，拉取镜像则不需要，不同环境也需要不同的访问策略。简单的http验证扩展能力受限，<a target="_blank" rel="noopener" href="https://github.com/cesanta/docker_auth"><strong>docker_auth</strong></a>提供了基于token的docker registry验证实现方式，可以更好的支持实际场景：</p>
<ul>
<li>支持第三方用户认证</li>
<li>支持较为丰富ACL策略配置</li>
<li>配置部署易于上手</li>
</ul>
</li>
</ul>
<p>本文经过作者亲自验证，如果读者实践时出错，欢迎在评论区指出</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/11/docker-%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/11/docker-compose%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/11/docker-compose%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">docker-compose总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-11 16:36:14 / 修改时间：16:40:50" itemprop="dateCreated datePublished" datetime="2021-07-11T16:36:14+08:00">2021-07-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="什么是Docker-Compose"><a href="#什么是Docker-Compose" class="headerlink" title="什么是Docker Compose"></a>什么是Docker Compose</h2><ul>
<li>一个应用往往由多个容器组合构成，分别管理过于繁琐，在单机、容器数量比较多的情况下，应该使用<code>Docker Compose</code>进行容器编排组织</li>
<li><code>Docker Compose</code>是<strong>一个用来定义和运行复杂应用的Docker工具（在单机进行编排）</strong></li>
<li><code>Docker Compose</code> 通过一个配置文件来管理多个Docker容器，在配置文件中，所有的容器通过services来定义，然后使用docker-compose命令脚本来启动，停止和重启应用，非常适合组合使用多个容器进行开发的场景。</li>
<li><strong>虽然一直强调单机的容器编排，但是实际上在docker compose的v3版本之后，可以进行跨主机的容器集群的编排了，但是说白了就是docker swarm借助compose的配置文件来完成多服务的部署，使用的是<code>docker stack deploy</code>命令，对于Docker Swarm自己使用的还是比较少的</strong></li>
<li>下边的内容，介绍常用的配置参数与自己使用过程中的亲测可用的配置案例</li>
</ul>
<h3 id="Docker-Compose的特点"><a href="#Docker-Compose的特点" class="headerlink" title="Docker Compose的特点"></a>Docker Compose的特点</h3><ul>
<li>在一个主机上安装多个相互隔离的虚拟环境（使用<code>project name</code>作区分，启动时使用<code>-p</code> 指定即可）</li>
<li>主动复制旧的容器的volume数据到新的容器</li>
<li>缓存配置，如果更改了部分配置，其余未更改的配置对应的容器不会重建</li>
<li>yaml配置文件可以使用占位符提升自由度，可以将公共部分提取到单独的yaml文件，并被其他yaml文件引用，可以同时指定多个配置文件组合以适应不同的构建环境</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/11/docker-compose%E6%80%BB%E7%BB%93/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/11/docker-build-kit%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/11/docker-build-kit%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F/" class="post-title-link" itemprop="url">docker build kit构建镜像</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-11 16:34:58 / 修改时间：16:40:42" itemprop="dateCreated datePublished" datetime="2021-07-11T16:34:58+08:00">2021-07-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">sudo sh get-docker.sh</span><br><span class="line">sudo usermod -aG <span class="variable">$&#123;user_name&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="build-kit是什么"><a href="#build-kit是什么" class="headerlink" title="build-kit是什么"></a>build-kit是什么</h2><ul>
<li>参考<a target="_blank" rel="noopener" href="https://collabnix.com/building-arm-based-docker-images-on-docker-desktop-made-possible-using-buildx/">build ARM based Docker Images</a> </li>
<li>简单来说就是扩展<code>docker build</code>的一个实验性的功能</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/11/docker-build-kit%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/11/%E4%BD%BF%E7%94%A8docker-compose-%E6%9E%84%E5%BB%BAWordPress%E5%B9%B3%E5%8F%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Long March">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/11/%E4%BD%BF%E7%94%A8docker-compose-%E6%9E%84%E5%BB%BAWordPress%E5%B9%B3%E5%8F%B0/" class="post-title-link" itemprop="url">使用docker-compose 构建WordPress平台</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-07-11 15:19:44 / 修改时间：15:33:11" itemprop="dateCreated datePublished" datetime="2021-07-11T15:19:44+08:00">2021-07-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="使用docker-compose-amp-WordPress建站"><a href="#使用docker-compose-amp-WordPress建站" class="headerlink" title="使用docker-compose &amp;WordPress建站"></a>使用docker-compose &amp;WordPress建站</h1><h2 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.28.2/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>

<ul>
<li>如果出现网络问题，直接用浏览器下载可执行文件放到<code>/usr/local/bin</code>目录下即可</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/11/%E4%BD%BF%E7%94%A8docker-compose-%E6%9E%84%E5%BB%BAWordPress%E5%B9%B3%E5%8F%B0/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Lee</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">19</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lee</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
